/**
 * This file contains an AMD/jQuery module to expand and collapse course rubrics.
 *
 * @package    block_filtered_course_list
 * @copyright  2016 CLAMP
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
(window.define||((dependencies,callback)=>{callback(window.jQuery)}))("block_filtered_course_list/accordion",["jquery"],$=>{var storage_set=(key,value)=>{try{localStorage.setItem("block_fcl_"+key,value)}catch(e){}},storage_get=key=>{try{return localStorage.getItem("block_fcl_"+key)}catch(e){return null}};function collapseRubric(rubric,persist){$(rubric).removeClass("block-fcl__rubric--expanded"),$(rubric).addClass("block-fcl__rubric--collapsed"),$(rubric).attr("aria-expanded","false"),$(rubric).next().attr("aria-hidden","true"),1==persist&&storage_set(rubric.dataset.hash,"collapsed")}return{init:params=>{var blockid=params.blockid;$("#"+blockid+" .block-fcl__rubric").each(function(){var state=storage_get(this.dataset.hash);$(this).hasClass("block-fcl__rubric--expanded")||state&&"collapsed"!=state||collapseRubric(this,params.persist),$(this).wrapInner(document.createElement("a")),$(this).find("a").attr("href","#"),$(this).on("click",function(event){var rubric,persist;event.preventDefault(),$(".block-fcl__rubric").each(function(){$(this).attr("aria-selected","false")}),$(this).attr("aria-selected","true"),$(this).hasClass("block-fcl__rubric--collapsed")?(rubric=this,persist=params.persist,$(rubric).removeClass("block-fcl__rubric--collapsed"),$(rubric).addClass("block-fcl__rubric--expanded"),$(rubric).attr("aria-expanded","true"),$(rubric).next().attr("aria-hidden","false"),1==persist&&storage_set(rubric.dataset.hash,"expanded")):$(this).hasClass("block-fcl__rubric--expanded")&&collapseRubric(this,params.persist)})})}}});

//# sourceMappingURL=accordion.min.js.map